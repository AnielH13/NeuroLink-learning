<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NeuroLink Learning</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <h1>NeuroLink Learning</h1>
    <p>La educaciÃ³n que se adapta a tu mente.</p>
    <a href="#chat" class="btn">Quiero saber mÃ¡s</a>
  </header>

  <!-- Chat widget (muy ligero) -->
  <div id="chat" class="chatbox">
    <div id="chat-log"></div>
    <form id="chat-form">
      <input id="chat-input" placeholder="Escribe aquÃ­â€¦" autocomplete="off" />
      <button>Enviar</button>
    </form>
  </div>

  <!-- Botones externos -->
  <div class="floating-links">
    <a
      target="_blank"
      href="https://wa.me/50766390754?text=Hola%20Â¡Quiero%20sab%E9r%20m%E1s%20sobre%20NeuroLink%20Learning!"
      >ğŸ’¬ WhatsApp</a
    >
    <a
      target="_blank"
      href="https://instagram.com/neuro_link_learning"
      >ğŸ“¸ Instagram</a
    >
  </div>

  <!-- Stripe compra directa -->
  <button id="buy-btn" class="btn buy">Comprar ahora</button>

  <script>
    // chat front-end
    const form   = document.getElementById('chat-form');
    const input  = document.getElementById('chat-input');
    const log    = document.getElementById('chat-log');

    const add = (text, cls='user') => {
      const div = document.createElement('div');
      div.className = cls;
      div.textContent = text;
      log.appendChild(div);
      log.scrollTop = log.scrollHeight;
    };

    form.addEventListener('submit', async e => {
      e.preventDefault();
      const q = input.value.trim();
      if (!q) return;
      add(q, 'user');
      input.value = '';
      add('Â·Â·Â·', 'bot');
      const res = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ message: q })
      });
      const data = await res.json();
      log.lastChild.textContent = data.reply;
    });

    // Stripe checkout
    document.getElementById('buy-btn').onclick = async () => {
      const r = await fetch('/api/purchase', { method:'POST' });
      const { url } = await r.json();
      location.href = url;             // redirige a Stripe
    };
  </script>
</body>
</html>
